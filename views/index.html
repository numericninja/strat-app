<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="@emiliodib" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Outil collaboratif. Pensée stratégique.</title>
    <link rel="stylesheet" href="css/bulma.min.css" />
    <link rel="stylesheet" href="css/animate.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-137495270-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-137495270-2");
    </script>
  </head>
  <body>
    <!-- development version, includes helpful console warnings -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
    <script src="js/vue.min.js"></script>
    <script src="js/axios.min.js"></script>

    <div v-cloak id="app">
      <header></header>
      <transition name="fade">
        <aside
          v-if="menuBool"
          class="menu is-fixed-top menu-above-fixed slideInRight animated"
        >
          <p class="has-text-right menu-close" @click="menuBool=false">
            ×
          </p>
          <section class="section menu-content">
            <div class="container">
              <h1 class="title">
                À quoi sert cet outil&nbsp;?
              </h1>
              <p class="menu-label">
                Une aide à la pensée stratégique
              </p>
              <p>
                Une personne, un groupe, des militants, un rond-point, une
                assemblée générale... peuvent se saisir de cet outil afin de
                mener une réflexion stratégique structurée.
              </p>
              <ul class="menu-list margin-top-xs">
                <li>
                  <a class="no-click"
                    >En se posant des questions de fond à propos du
                    mouvement&nbsp;: sa finalité, les actions à mettre en place,
                    le dénouement souhaité, etc.</a
                  >
                </li>
                <li>
                  <a class="no-click"
                    >En soutenant et en s'inspirant des idées remontées par la
                    communauté.</a
                  >
                </li>
                <li>
                  <a class="no-click"
                    >En soumettant de nouvelles propositions afin d'en faire
                    béneficier l'ensemble de la communauté.</a
                  >
                </li>
                <li>
                  <a class="no-click"
                    >En formulant leur propre lecture du mouvement et leur
                    propre vision pour son avenir.</a
                  >
                </li>
              </ul>

              <p class="menu-label margin-top-medium">
                Exemple de lecture stratégique
              </p>
              <p class="help">
                Ce qui suit n'est qu'une simple illustration. Le flux de
                contributions étant continu et la sensibilité de chacun pouvant
                être différente, l'exemple qui suit n'est qu'une analyse
                subjective et à un moment donné. Son seul but est d'illustrer
                l'utilisation pouvant être faite de cet outil numérique. En
                effet, une des forces du mouvement des Gilets Jaunes est sa
                diversité et le fait que ses membres soient redevenus des
                citoyens à part entière qui mènent leur propres réflexions et en
                formulent les conclusions, au lieu d'être des consommateurs
                passifs qui laissent des politiciens de carrières réfléchir à
                leur place.
              </p>
              <h2 class="title is-5 margin-top-medium">
                La finalité du mouvement
              </h2>
              <p>
                Le mouvement des Gilets Jaunes vise à instaurer une meilleure
                démocratie, plus inclusive, en donnant des pouvoirs étendus aux
                citoyens. Il faut absolument que la politique serve l'intérêt de
                l'ensemble des citoyens. L'augementation des injustices fiscale,
                sociale et juridique auxquels nous assistons depuis des
                décennies n'est plus tolérable. Le système politique actuel est
                à la dérive, il est de plus en plus faible avec les forts et dur
                avec les faibles.
              </p>
              <p class="margin-top-small">
                Il faut que les petits patrons, les artisans et les commerçants
                soient favorisés fiscalement par rapport aux grands groupes. Que
                les classes moyenne et pauvre arrêtent de supporter l'effort de
                l'impôt de manière disproportionnée en comparaison avec les
                ultra-riches.
              </p>
              <p class="margin-top-small">
                Il faut en finir avec la suppression des services publiques
                essentiels, des hopitaux, des gares, des bureaux de poste... et
                veiller au développement équitable de l'ensemble du territoire
                français. Il faut arrêter la marche effrénée des privatisations
                des biens communs au profit de quelques fortunes privées.
              </p>
              <h2 class="title is-5 margin-top-medium">
                Les revendications
              </h2>
              <p>
                Ces aspirations se traduisent par des revendications simples et
                claires. Le Referendum d'Initiative Citoyenne en toutes matières
                doit être inscrit dans la constitution française. Il doit
                permettre aux citoyens de proposer et d'abroger une loi, de
                modifier la constitution, et de révoquer un élu.
              </p>
              <p class="margin-top-small">
                L'executif doit supprimer, tout de suite, la TVA sur les
                produits alimentaires de première nécessité. Il doit rétablir
                l'ISF en veillant à ce que le capital investi dans l'économie
                réelle soit totalement éxonéré de charges, et réserver les aides
                du CICE aux petites et moyennes entreprises.
              </p>
              <p class="margin-top-small">
                Tous les travailleurs doivent pouvoir vivre dignement de leurs
                revenus. Nos aînés doivent pouvoir bénéficier de retraites
                décentes qui leur permettent de subvenir à leurs besoins et de
                pouvoir combler d'attentions leurs enfants et petits enfants.
              </p>
              <p class="margin-top-small">
                Des peines planchers de trois ans de prison ferme doivent être
                instaurées pour les fraudeurs fiscaux. Les lois doivent être
                endurcies et plus de contrôles fiscaux doivent être effectués
                pour les plus grandes fortunes afin de ramener 100Md€ d'évasion
                et d'optimisation fiscales.
              </p>
              <h2 class="title is-5 margin-top-medium">
                Choix stratégiques
              </h2>
              <p>
                Pour y parvenir, nous devons gagner le rapport de force avec le
                pouvoir politique qui n'entend que celà. Nous devons oeuvrer
                pour rallier l'ensemble des Français à la cause des Gilets
                Jaunes en gagnant la bataille de la communication et de l'image,
                en faisant connaître nos revendications, et en faisant savoir
                qu'elles sont démocratiques.
              </p>
              <p class="margin-top-small">
                Nous allons travailler, localement dans chaque commune, chaque
                quartier et sur chaque rond point, à convaincre les personnes
                syndiquées, les gendarmes et policiers, les profs et
                fonctionnaires, les salariés, les artisants, commerçants et
                chefs d'entreprises que nos revendications sont justes et
                qu'elles leur sont favorables.
              </p>
              <p class="margin-top-small">
                Avec l'arrivée du beau temps, nous allons devenir de plus en
                plus visibles et nombreux, et nous allons présenter une image
                positive, belle, optimiste et pleine d'espoir partout où nous
                pouvons : sur les ronds points, dans les manifestations, sur les
                réseaux sociaux, et dans les médias traditionnels et
                alternatifs.
              </p>
              <h2 class="title is-5 margin-top-medium">
                Actions de terrain
              </h2>
              <p>
                Concrètement, nous appelons à réinvestir les ronds points de
                manière festive et utile : barbecues, piqueniques, musique,
                projections de films, débats citoyens, assemblées
                constituantes... Nous allons continuer à manifester tous les
                samedis car si nous arrêtons, le pouvoir va encore dire que nous
                n'existons plus et que le mouvement s'est essouflé. Nous allons
                dédoubler les actions symboliques de bloquage et de protestation
                afin de maintenir le pouvoir executif sous pression.
              </p>
              <p class="margin-top-small">
                Nous allons continuer de veiller à ne pas tomber dans le piège
                des listes électorales ou la récuperation par des partis
                politiques de droite comme de gauche. Nos revendications doivent
                rester politiques mais apartisanes. Avant d'être de gauche ou de
                droite, notre projet est surtout citoyen et bénéficie à
                l'ensemble des Français. Tout le monde, quelle que soit son
                étiquette politique, est concerné par une meilleure politique
                qui mette le citoyen au centre du pouvoir.
              </p>
              <h2 class="title is-5 margin-top-medium">
                Acquis et dénouements
              </h2>
              <p>
                D'ores et déjà, une révolution est faite dans les esprits. Les
                Français ont pris conscience de leur pouvoir et de leur rôle de
                citoyens. Plus personne ne pourra nous arracher celà et nous
                n'allons plus jamais attendre, impuissants, qu'un quelconque
                parti ou syndicat vienne à la rescousse du peuple. Par notre
                action et par l'ancrage du mouvement depuis plusieurs mois, nous
                avons semé des graines pour les générations à venir.
              </p>
              <p class="margin-top-small">
                Nous continuerons notre mobilisations jusqu'à ce qu'une nouvelle
                constitution — qui contient le RIC en toutes matières — soit
                adoptée par le peuple à l'issu d'un processus constituant
                impliquant l'ensemble des citoyens. Nous ne nous arrêterons pas
                avant de sortir des traités de l'UE qui retirent une part de la
                souveraineté nationale et qui ont été imposés au peuple en dépit
                du vote démocratique.
              </p>
              <p class="margin-top-small">
                Dès l'instauration de cette nouvelle constitution, nous
                utiliserons le RIC pour annuler la privatisation des biens et
                des entreprises qui rapportent de l'argent et dont l'existence
                et la construction ont dépendu de l'investissement de l'État.
                Nous utiliserons également le RIC pour proposer la révocation de
                tous les responsables politiques actuels qui se sont rendus
                complices des violences faites aux manifestants et de la
                restriction de la liberté d'expression. Nous resterons vigilants
                pour que la France demeure une lueur d'espoir et un exemple à
                suivre en termes de démocratie et de droits de l'Homme pour le
                monde entier.
              </p>
            </div>
          </section>
        </aside>
      </transition>
      <main>
        <section class="section">
          <div class="container">
            <h1 class="title">
              Questions de stratégie
            </h1>
            <p class="subtitle">
              Penser le mouvement des gilets jaunes
            </p>
            <p>
              Cet outil collaboratif est une aide à la réflexion stratégique. Il
              permet de <strong>remonter</strong> et d'<strong>explorer</strong>
              différentes idées de façon structurée.
              <span class="has-text-grey"
                ><span class="menu-call has-text-info" @click="menuBool=true"
                  >Ce n'est ni un sondage ni un vote.</span
                >
                Les résultats qui y figurent ne se prétendent pas représentatifs
                des opinions des Français, ni même de ceux de l'ensemble des
                Gilets Jaunes. C'est simplement une invitation à approfondir et
                à élargir les choix qui s'offrent à chacun.</span
              >
            </p>
            <div class="has-text-right margin-top-medium">
              <strong>
                {{
                  acquisCont +
                    finaliteCont +
                    revendicationCont +
                    denouementCont +
                    strategieCont +
                    jourCont +
                    actionsouhaiteeCont +
                    actionpeusouhaiteeCont +
                    10000
                }}
              </strong>
              contributions. <br /><small class="has-text-grey"
                >Comptage façon Grand Débat ;-)</small
              >
            </div>
          </div>
        </section>

        <section class="section has-background-white-bis">
          <div class="container">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">
                  La finalité du mouvement
                </h3>
                <p class="help">
                  Appuyer sur une proposition pour la soutenir. Vous pouvez
                  également soumettre de nouvelles idées en bas de chaque liste.
                </p>
                <div class="list is-hoverable margin-top-small scroll-inside">
                  <a
                    v-for="finalite in lesfinalites"
                    class="list-item"
                    @click="selected.includes(finalite._id) ? (1+1) : upVoteFinalite(finalite._id);selected.push(finalite._id)"
                    :class="{'is-active is-disabled':selected.includes(finalite._id)}"
                  >
                    {{ finalite.name }}
                  </a>
                  <div class="list-item">
                    <transition name="fade">
                      <p v-if="errorFinalite" class="help is-danger">
                        Entre 10 et 100 caractères.
                      </p>
                    </transition>
                    <transition name="fade">
                      <p v-if="newFinalite.length>90" class="help is-info">
                        100 caractères max. Il vous reste
                        {{ 100 - newFinalite.length }}.
                      </p>
                    </transition>
                    <div class="field has-addons">
                      <input
                        class="input"
                        maxlength="100"
                        minlength="10"
                        type="text"
                        placeholder="Proposer une nouvelle finalité"
                        v-on:keyup.enter="createFinalite"
                        v-model="newFinalite"
                      />
                      <div class="control">
                        <a class="button is-info" v-on:click="createFinalite"
                          >⏎</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-finalite">
                  <transition name="fade">
                    <div
                      v-if="showFinVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerFinalite"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="container margin-top-medium">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">Les revendications</h3>
                <p class="help">
                  Appuyer sur une proposition pour la soutenir.
                </p>
                <div class="list is-hoverable margin-top-small scroll-inside">
                  <a
                    v-for="revendication in lesrevendications"
                    class="list-item"
                    @click="selected.includes(revendication._id) ? (1+1) : upVoteRevendication(revendication._id);selected.push(revendication._id)"
                    :class="{'is-active is-disabled':selected.includes(revendication._id)}"
                  >
                    {{ revendication.name }}
                  </a>
                  <div class="list-item">
                    <transition name="fade">
                      <p v-if="errorRevendication" class="help is-danger">
                        Entre 10 et 100 caractères.
                      </p>
                    </transition>
                    <transition name="fade">
                      <p v-if="newRevendication.length>90" class="help is-info">
                        100 caractères max. Il vous reste
                        {{ 100 - newRevendication.length }}.
                      </p>
                    </transition>
                    <div class="field has-addons">
                      <input
                        class="input"
                        maxlength="100"
                        minlength="10"
                        type="text"
                        placeholder="Proposer une nouvelle revendication"
                        v-on:keyup.enter="createRevendication"
                        v-model="newRevendication"
                      />
                      <div class="control">
                        <a
                          class="button is-info"
                          v-on:click="createRevendication"
                          >⏎</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-revendication">
                  <transition name="fade">
                    <div
                      v-if="showRevVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerRevendication"></div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="container">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">Choix stratégiques</h3>
                <p class="help">
                  Appuyer sur une proposition pour la soutenir.
                </p>
                <div class="list is-hoverable margin-top-small scroll-inside">
                  <a
                    v-for="strategie in lesstrategies"
                    class="list-item"
                    @click="selected.includes(strategie._id) ? (1+1) : upVoteStrategie(strategie._id);selected.push(strategie._id)"
                    :class="{'is-active is-disabled':selected.includes(strategie._id)}"
                  >
                    {{ strategie.name }}
                  </a>
                  <div class="list-item">
                    <transition name="fade">
                      <p v-if="errorStrategie" class="help is-danger">
                        Entre 10 et 100 caractères.
                      </p>
                    </transition>
                    <transition name="fade">
                      <p v-if="newStrategie.length>90" class="help is-info">
                        100 caractères max. Il vous reste
                        {{ 100 - newStrategie.length }}.
                      </p>
                    </transition>
                    <div class="field has-addons">
                      <input
                        class="input"
                        maxlength="100"
                        minlength="10"
                        type="text"
                        placeholder="Proposer une nouvelle stratégie"
                        v-on:keyup.enter="createStrategie"
                        v-model="newStrategie"
                      />
                      <div class="control">
                        <a class="button is-info" v-on:click="createStrategie"
                          >⏎</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-strategie">
                  <transition name="fade">
                    <div
                      v-if="showStraVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerStrategie"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="container margin-top-medium margin-bottom-large">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">Actions souhaitées</h3>
                <p class="help">
                  Actions possibles qui pourront permettre au mouvement
                  d'accéder à ses revendications. Pour chaque action, estimer
                  l'effort de mise en place (temps, argent, nombre de
                  personnes...) et l'impact obtenu (combien l'action est
                  suceptible de faire avancer le mouvement).
                </p>
                <p class="help">
                  Les actions en haut à gauche (quadrant vert) seraient celles
                  qui requièrent le moins d'effort et qui apportent le plus
                  d'impact. Plus une bulle est grande, et plus l'action a reçu
                  du soutien.
                </p>

                <div
                  class="list is-hoverable margin-top-small scroll-inside longer"
                >
                  <div
                    class="list-item"
                    v-for="actionsouhaitee in lesactionssouhaitees"
                    class="list-item"
                    :class="{'is-active is-disabled':selected.includes(actionsouhaitee._id)}"
                  >
                    <transition name="fade">
                      <p
                        v-if="errorUpvoteActionsouhaitee.includes(actionsouhaitee._id)"
                        class="help is-danger"
                      >
                        Choisir un 'effet' et un 'impact' pour soutenir cette
                        idée.
                      </p>
                    </transition>
                    <div class="columns is-variable is-1">
                      <div
                        class="action-click column is-three-quarters-desktop"
                        @click="selected.includes(actionsouhaitee._id) ? (1+1) : upVoteActionsouhaitee(actionsouhaitee._id)"
                      >
                        <a>
                          {{ actionsouhaitee.name }}
                        </a>
                      </div>
                      <div class="column">
                        <div class="field">
                          <div class="control">
                            <div class="select is-small is-warning">
                              <select
                                :disabled="selected.includes(actionsouhaitee._id) ? true : false"
                                v-model="actionsouhaitee.selectedEffortUpvote"
                                @change="((!selected.includes(actionsouhaitee._id)) && (actionsouhaitee.selectedImpactUpvote != 'choix-impact')) ? upVoteActionsouhaitee(actionsouhaitee._id) : (1+1)"
                              >
                                <option value="choix-effort" selected disabled
                                  >Choix effort :&nbsp;&nbsp;</option
                                >
                                <option>Modéré</option>
                                <option>Important</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="field">
                          <div class="control">
                            <div class="select is-small is-success">
                              <select
                                :disabled="selected.includes(actionsouhaitee._id) ? true : false"
                                v-model="actionsouhaitee.selectedImpactUpvote"
                                @change="((!selected.includes(actionsouhaitee._id)) && (actionsouhaitee.selectedEffortUpvote != 'choix-effort')) ? upVoteActionsouhaitee(actionsouhaitee._id) : (1+1)"
                              >
                                <option value="choix-impact" selected disabled
                                  >Choix impact :</option
                                >
                                <option>Modéré</option>
                                <option>Favorable</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="list-item">
                    <div class="">
                      <div class="">
                        <transition name="fade">
                          <p v-if="errorActionsouhaitee" class="help is-danger">
                            Entre 10 et 100 caractères.
                          </p>
                          <p
                            v-if="errorActionsouhaiteeChoix"
                            class="help is-danger"
                          >
                            Choisir un 'effort' et un 'impact'.
                          </p>
                        </transition>
                        <transition name="fade">
                          <p
                            v-if="newActionsouhaitee.length>90"
                            class="help is-info"
                          >
                            100 caractères max. Il vous reste
                            {{ 100 - newActionsouhaitee.length }}.
                          </p>
                        </transition>
                        <div class="field ">
                          <input
                            class="input"
                            maxlength="100"
                            minlength="10"
                            type="text"
                            placeholder="Proposer une nouvelle action"
                            v-on:keyup.enter="createActionsouhaitee"
                            v-model="newActionsouhaitee"
                          />
                        </div>
                      </div>
                      <div class="columns">
                        <div class="column is-two-thirds">
                          <div class="field is-grouped">
                            <div class="control margin-top-xs">
                              <div class="select is-warning is-small">
                                <select v-model="selectedEffort">
                                  <option value="choix-effort" selected disabled
                                    >Choix effort :</option
                                  >
                                  <option>Modéré</option>
                                  <option>Important</option>
                                </select>
                              </div>
                            </div>
                            <div class="control margin-top-xs">
                              <div class="select is-success is-small">
                                <select v-model="selectedImpact">
                                  <option value="choix-impact" selected disabled
                                    >Choix impact :</option
                                  >
                                  <option>Modéré</option>
                                  <option>Favorable</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="column">
                          <div class="field is-grouped is-grouped-right">
                            <p class="control margin-top-xs">
                              <a
                                v-on:click="createActionsouhaitee"
                                class="button is-info is-small"
                              >
                                Contribuer ⏎
                              </a>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-actionsouhaitee">
                  <transition name="fade">
                    <div
                      v-if="showActsouhVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerActionsouhaitee"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="container margin-top-medium margin-bottom-large">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">
                  Actions peu souhaitables
                </h3>
                <p class="help">
                  Actions à éviter ou à contrer, qui pourraient nuire au
                  mouvement. Pour chaque action, estimer l'effort de mise en
                  place et l'impact potentiel (combien l'action est suceptible
                  de porter préjudice ou de discréditer le mouvement).
                </p>

                <div
                  class="list is-hoverable margin-top-small scroll-inside longer"
                >
                  <div
                    class="list-item"
                    v-for="actionpeusouhaitee in lesactionspeusouhaitees"
                    class="list-item"
                    :class="{'is-active is-disabled':selected.includes(actionpeusouhaitee._id)}"
                  >
                    <transition name="fade">
                      <p
                        v-if="errorUpvoteActionpeusouhaitee.includes(actionpeusouhaitee._id)"
                        class="help is-danger"
                      >
                        Choisir un 'effet' et un 'impact'.
                      </p>
                    </transition>
                    <div class="columns is-variable is-1">
                      <div
                        class="action-click column is-three-quarters-desktop"
                        @click="selected.includes(actionpeusouhaitee._id) ? (1+1) : upVoteActionpeusouhaitee(actionpeusouhaitee._id)"
                      >
                        <a>
                          {{ actionpeusouhaitee.name }}
                        </a>
                      </div>
                      <div class="column">
                        <div class="field">
                          <div class="control">
                            <div class="select is-small is-warning">
                              <select
                                :disabled="selected.includes(actionpeusouhaitee._id) ? true : false"
                                v-model="actionpeusouhaitee.selectedEffortUpvote"
                                @change="((!selected.includes(actionpeusouhaitee._id)) && (actionpeusouhaitee.selectedImpactUpvote != 'choix-impact')) ? upVoteActionpeusouhaitee(actionpeusouhaitee._id) : (1+1)"
                              >
                                <option value="choix-effort" selected disabled
                                  >Choix effort :&nbsp;&nbsp;</option
                                >
                                <option>Modéré</option>
                                <option>Important</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="field">
                          <div class="control">
                            <div class="select is-small is-danger">
                              <select
                                :disabled="selected.includes(actionpeusouhaitee._id) ? true : false"
                                v-model="actionpeusouhaitee.selectedImpactUpvote"
                                @change="((!selected.includes(actionpeusouhaitee._id)) && (actionpeusouhaitee.selectedEffortUpvote != 'choix-effort')) ? upVoteActionpeusouhaitee(actionpeusouhaitee._id) : (1+1)"
                              >
                                <option value="choix-impact" selected disabled
                                  >Choix impact :</option
                                >
                                <option>Modéré</option>
                                <option>Défavorable</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="list-item">
                    <div class="">
                      <div class="">
                        <transition name="fade">
                          <p
                            v-if="errorActionpeusouhaitee"
                            class="help is-danger"
                          >
                            Entre 10 et 100 caractères.
                          </p>
                          <p
                            v-if="errorActionpeusouhaiteeChoix"
                            class="help is-danger"
                          >
                            Choisir un 'effort' et un 'impact'.
                          </p>
                        </transition>
                        <transition name="fade">
                          <p
                            v-if="newActionpeusouhaitee.length>90"
                            class="help is-info"
                          >
                            100 caractères max. Il vous reste
                            {{ 100 - newActionpeusouhaitee.length }}.
                          </p>
                        </transition>
                        <div class="field ">
                          <input
                            class="input"
                            maxlength="100"
                            minlength="10"
                            type="text"
                            placeholder="Autre action à éviter"
                            v-on:keyup.enter="createActionpeusouhaitee"
                            v-model="newActionpeusouhaitee"
                          />
                        </div>
                      </div>
                      <div class="columns">
                        <div class="column is-two-thirds">
                          <div class="field is-grouped">
                            <div class="control margin-top-xs">
                              <div class="select is-warning is-small">
                                <select v-model="selectedEffortPeu">
                                  <option value="choix-effort" selected disabled
                                    >Choix effort :</option
                                  >
                                  <option>Modéré</option>
                                  <option>Important</option>
                                </select>
                              </div>
                            </div>
                            <div class="control margin-top-xs">
                              <div class="select is-danger is-small">
                                <select v-model="selectedImpactPeu">
                                  <option value="choix-impact" selected disabled
                                    >Choix impact :</option
                                  >
                                  <option>Modéré</option>
                                  <option>Défavorable</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="column">
                          <div class="field is-grouped is-grouped-right">
                            <p class="control margin-top-xs">
                              <a
                                v-on:click="createActionpeusouhaitee"
                                class="button is-info is-small"
                              >
                                Contribuer ⏎
                              </a>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-actionpeusouhaitee">
                  <transition name="fade">
                    <div
                      v-if="showActpeusouhVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerActionpeusouhaitee"></div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="section has-background-white-bis">
          <div class="container">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">
                  Les acquis du mouvements
                </h3>
                <p class="help">
                  Ce qui a déjà été gagné. Les petits succès qui montrent qu'on
                  avance et que le changement est possible.
                </p>
                <div class="list is-hoverable margin-top-small scroll-inside">
                  <a
                    v-for="acquis in lesacquis"
                    class="list-item"
                    @click="selected.includes(acquis._id) ? (1+1) : upVoteAcquis(acquis._id);selected.push(acquis._id)"
                    :class="{'is-active is-disabled':selected.includes(acquis._id)}"
                  >
                    {{ acquis.name }}
                  </a>
                  <div class="list-item">
                    <transition name="fade">
                      <p v-if="errorAcquis" class="help is-danger">
                        Entre 10 et 100 caractères.
                      </p>
                    </transition>
                    <transition name="fade">
                      <p v-if="newAcquis.length>90" class="help is-info">
                        100 caractères max. Il vous reste
                        {{ 100 - newAcquis.length }}.
                      </p>
                    </transition>
                    <div class="field has-addons">
                      <input
                        class="input"
                        maxlength="100"
                        minlength="10"
                        type="text"
                        placeholder="Ajouter un acquis"
                        v-on:keyup.enter="createAcquis"
                        v-model="newAcquis"
                      />
                      <div class="control">
                        <a class="button is-info" v-on:click="createAcquis"
                          >⏎</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-acquis">
                  <transition name="fade">
                    <div
                      v-if="showAcqVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerAcquis"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="container margin-top-medium">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">Dénouements souhaités</h3>
                <p class="help">
                  Appuyer sur une idée pour la soutenir.
                </p>
                <div class="list is-hoverable margin-top-small scroll-inside">
                  <a
                    v-for="denouement in lesdenouements"
                    class="list-item"
                    @click="selected.includes(denouement._id) ? (1+1) : upVoteDenouement(denouement._id);selected.push(denouement._id)"
                    :class="{'is-active is-disabled':selected.includes(denouement._id)}"
                  >
                    {{ denouement.name }}
                  </a>
                  <div class="list-item">
                    <transition name="fade">
                      <p v-if="errorDenouement" class="help is-danger">
                        Entre 10 et 100 caractères.
                      </p>
                    </transition>
                    <transition name="fade">
                      <p v-if="newDenouement.length>90" class="help is-info">
                        100 caractères max. Il vous reste
                        {{ 100 - newDenouement.length }}.
                      </p>
                    </transition>
                    <div class="field has-addons">
                      <input
                        class="input"
                        maxlength="100"
                        minlength="10"
                        type="text"
                        placeholder="Proposer un nouveau dénouement"
                        v-on:keyup.enter="createDenouement"
                        v-model="newDenouement"
                      />
                      <div class="control">
                        <a class="button is-info" v-on:click="createDenouement"
                          >⏎</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-denouement">
                  <transition name="fade">
                    <div
                      v-if="showDenVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerDenouement"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="container margin-top-medium margin-bottom-large">
            <div class="columns">
              <div class="column">
                <h3 class="title is-4 is-marginless">Le jour d'après</h3>
                <p class="help">
                  Ce qui doit se produire le lendemain de la victoire.
                </p>
                <div class="list is-hoverable margin-top-small scroll-inside">
                  <a
                    v-for="jour in lesjours"
                    class="list-item"
                    @click="selected.includes(jour._id) ? (1+1) : upVoteJour(jour._id);selected.push(jour._id)"
                    :class="{'is-active is-disabled':selected.includes(jour._id)}"
                  >
                    {{ jour.name }}
                  </a>
                  <div class="list-item">
                    <transition name="fade">
                      <p v-if="errorJour" class="help is-danger">
                        Entre 10 et 100 caractères.
                      </p>
                    </transition>
                    <transition name="fade">
                      <p v-if="newJour.length>90" class="help is-info">
                        100 caractères max. Il vous reste
                        {{ 100 - newJour.length }}.
                      </p>
                    </transition>
                    <div class="field has-addons">
                      <input
                        class="input"
                        maxlength="100"
                        minlength="10"
                        type="text"
                        placeholder="Proposer une nouvelle idée"
                        v-on:keyup.enter="createJour"
                        v-model="newJour"
                      />
                      <div class="control">
                        <a class="button is-info" v-on:click="createJour">⏎</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column">
                <div id="chart-jour">
                  <transition name="fade">
                    <div
                      v-if="showJouVote"
                      class="plus-one has-text-grey slideInLeft animated"
                    >
                      +1
                    </div>
                  </transition>
                  <div id="chartContainerJour"></div>
                </div>
                <p class="help margin-top-large">
                  *Les pourcentages affichés représentent le nombre de soutiens
                  reçus par une proposition ÷ le nombre total de soutiens d'un
                  graphe.
                </p>
              </div>
            </div>
          </div>
          <div
            class="has-text-centered margin-top-xlarge margin-bottom-large is-size-1"
          >
            ✊
          </div>
        </section>
      </main>

      <footer class="footer bg-img">
        <div class="content has-text-centered">
          <p>
            Site bâti par
            <a href="https://twitter.com/emiliodib" target="_blank"
              >@emiliodib</a
            >. Open source. Licence MIT.
          </p>
        </div>
      </footer>
    </div>

    <script src="js/d3.min.js"></script>
    <script src="js/dimple.min.js"></script>
    <script>
      axios.defaults.baseURL = "https://strat.ml";
      axios.defaults.headers.post["Content-Type"] =
        "application/x-www-form-urlencoded";
      var hostname = "https://strat.ml";

      new Vue({
        el: "#app",
        data() {
          return {
            lesfinalites: null,
            lesrevendications: null,
            lesstrategies: null,
            lesjours: null,
            lesactionssouhaitees: null,
            lesactionspeusouhaitees: null,
            lesacquis: null,
            lesdenouements: null,
            selected: [],
            newFinalite: "",
            showFinVote: false,
            errorFinalite: false,
            newAcquis: "",
            showAcqVote: false,
            errorAcquis: false,
            newRevendication: "",
            showRevVote: false,
            errorRevendication: false,
            newDenouement: "",
            showDenVote: false,
            errorDenouement: false,
            newStrategie: "",
            showStraVote: false,
            errorStrategie: false,
            newJour: "",
            showJouVote: false,
            errorJour: false,
            newActionsouhaitee: "",
            showActsouhVote: false,
            errorActionsouhaitee: false,
            errorActionsouhaiteeChoix: false,
            errorUpvoteActionsouhaitee: [],
            selectedEffort: "choix-effort",
            selectedImpact: "choix-impact",
            newActionpeusouhaitee: "",
            showActpeusouhVote: false,
            errorActionpeusouhaitee: false,
            errorActionpeusouhaiteeChoix: false,
            errorUpvoteActionpeusouhaitee: [],
            selectedEffortPeu: "choix-effort",
            selectedImpactPeu: "choix-impact",
            acquisCont: 2,
            finaliteCont: 7,
            revendicationCont: 1,
            denouementCont: 3,
            strategieCont: 4,
            jourCont: 3,
            actionsouhaiteeCont: 9,
            actionpeusouhaiteeCont: 8,
            menuBool: false
          };
        },
        methods: {
          upVoteFinalite: function(id) {
            var zis = this;
            axios
              .put("/finalite/" + id + "/upvote/")
              .then(function(response) {
                zis.showFinVote = true;
                setTimeout(function() {
                  zis.showFinVote = false;
                }, 1000);

                axios
                  .get("/finalite/")
                  .then(function(response) {
                    zis.lesfinalites = response.data;
                  })
                  .catch(error => console.log(error));
              })
              .catch(error => console.log(error));
          },
          upVoteAcquis: function(id) {
            var zis = this;
            axios
              .put("/acquis/" + id + "/upvote/")
              .then(function(response) {
                zis.showAcqVote = true;
                setTimeout(function() {
                  zis.showAcqVote = false;
                }, 1000);

                axios
                  .get("/acquis/")
                  .then(function(response) {
                    zis.lesacquis = response.data;
                  })
                  .catch(error => console.log(error));
              })
              .catch(error => console.log(error));
          },
          upVoteRevendication: function(id) {
            var zis = this;
            axios
              .put("/revendication/" + id + "/upvote/")
              .then(function(response) {
                zis.showRevVote = true;
                setTimeout(function() {
                  zis.showRevVote = false;
                }, 1000);

                axios
                  .get("/revendication/")
                  .then(function(response) {
                    zis.lesrevendications = response.data;
                  })
                  .catch(error => console.log(error));
              })
              .catch(error => console.log(error));
          },
          upVoteDenouement: function(id) {
            var zis = this;
            axios
              .put("/denouement/" + id + "/upvote/")
              .then(function(response) {
                zis.showDenVote = true;
                setTimeout(function() {
                  zis.showDenVote = false;
                }, 1000);

                axios
                  .get("/denouement/")
                  .then(function(response) {
                    zis.lesdenouements = response.data;
                  })
                  .catch(error => console.log(error));
              })
              .catch(error => console.log(error));
          },
          upVoteStrategie: function(id) {
            var zis = this;
            axios
              .put("/strategie/" + id + "/upvote/")
              .then(function(response) {
                zis.showStraVote = true;
                setTimeout(function() {
                  zis.showStraVote = false;
                }, 1000);

                axios
                  .get("/strategie/")
                  .then(function(response) {
                    zis.lesstrategies = response.data;
                  })
                  .catch(error => console.log(error));
              })
              .catch(error => console.log(error));
          },
          upVoteJour: function(id) {
            var zis = this;
            axios
              .put("/jour/" + id + "/upvote/")
              .then(function(response) {
                zis.showJouVote = true;
                setTimeout(function() {
                  zis.showJouVote = false;
                }, 1000);

                axios
                  .get("/jour/")
                  .then(function(response) {
                    zis.lesjours = response.data;
                  })
                  .catch(error => console.log(error));
              })
              .catch(error => console.log(error));
          },
          upVoteActionsouhaitee: function(id) {
            var zis = this;
            var effortToSend = zis.lesactionssouhaitees.find(x => x._id === id)
              .selectedEffortUpvote;
            var impactToSend = zis.lesactionssouhaitees.find(x => x._id === id)
              .selectedImpactUpvote;

            if (
              effortToSend == "choix-effort" ||
              impactToSend == "choix-impact"
            ) {
              zis.errorUpvoteActionsouhaitee.push(id);

              setTimeout(function() {
                zis.errorUpvoteActionsouhaitee.pop();
              }, 3000);
            } else {
              let effortToSendValue = 0;
              let impactToSendValue = 0;
              effortToSend == "Modéré"
                ? (effortToSendValue = 2)
                : (effortToSendValue = 8);
              impactToSend == "Modéré"
                ? (impactToSendValue = 2)
                : (impactToSendValue = 8);

              axios
                .put("/actionsouhaitee/" + id + "/upvote/", {
                  impact: impactToSendValue,
                  effort: effortToSendValue
                })
                .then(function(response) {
                  zis.showActsouhVote = true;
                  zis.selected.push(response.data);
                  setTimeout(function() {
                    zis.showActsouhVote = false;
                  }, 1000);

                  axios
                    .get("/actionsouhaitee/")
                    .then(function(response) {
                      zis.lesactionssouhaitees = response.data;
                      zis.lesactionssouhaitees.map(
                        o => (o.selectedEffortUpvote = "choix-effort")
                      );
                      zis.lesactionssouhaitees.map(
                        o => (o.selectedImpactUpvote = "choix-impact")
                      );
                    })
                    .catch(error => console.log(error));
                })
                .catch(error => console.log(error));
            }
          },
          upVoteActionpeusouhaitee: function(id) {
            var zis = this;
            var effortToSend = zis.lesactionspeusouhaitees.find(
              x => x._id === id
            ).selectedEffortUpvote;
            var impactToSend = zis.lesactionspeusouhaitees.find(
              x => x._id === id
            ).selectedImpactUpvote;

            if (
              effortToSend == "choix-effort" ||
              impactToSend == "choix-impact"
            ) {
              zis.errorUpvoteActionpeusouhaitee.push(id);

              setTimeout(function() {
                zis.errorUpvoteActionpeusouhaitee.pop();
              }, 3000);
            } else {
              let effortToSendValue = 0;
              let impactToSendValue = 0;
              effortToSend == "Modéré"
                ? (effortToSendValue = 2)
                : (effortToSendValue = 8);
              impactToSend == "Modéré"
                ? (impactToSendValue = 2)
                : (impactToSendValue = 8);

              axios
                .put("/actionpeusouhaitee/" + id + "/upvote/", {
                  impact: impactToSendValue,
                  effort: effortToSendValue
                })
                .then(function(response) {
                  zis.showActpeusouhVote = true;
                  zis.selected.push(response.data);
                  setTimeout(function() {
                    zis.showActpeusouhVote = false;
                  }, 1000);

                  axios
                    .get("/actionpeusouhaitee/")
                    .then(function(response) {
                      zis.lesactionspeusouhaitees = response.data;
                      zis.lesactionspeusouhaitees.map(
                        o => (o.selectedEffortUpvote = "choix-effort")
                      );
                      zis.lesactionspeusouhaitees.map(
                        o => (o.selectedImpactUpvote = "choix-impact")
                      );
                    })
                    .catch(error => console.log(error));
                })
                .catch(error => console.log(error));
            }
          },
          sumVotesOnQuestion: function(gettedObject, votesKey) {
            return gettedObject.reduce(function(a, b) {
              return a + b[votesKey];
            }, 0);
          },
          removeElement: function(elementId) {
            var element = document.getElementById(elementId);
            element.parentNode.removeChild(element);
          },
          addElement: function(parentId, elementTag, elementId, html) {
            var p = document.getElementById(parentId);
            var newElement = document.createElement(elementTag);
            newElement.setAttribute("id", elementId);
            newElement.innerHTML = html;
            p.appendChild(newElement);
          },
          createFinalite: function() {
            var zis = this;
            if (zis.newFinalite.length < 10 || zis.newFinalite.length > 100) {
              zis.errorFinalite = true;
              setTimeout(function() {
                zis.errorFinalite = false;
              }, 3000);
            } else {
              axios
                .post("/finalite/create", {
                  name: this.newFinalite
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newFinalite = "";
                  axios
                    .get("/finalite/")
                    .then(function(response) {
                      zis.lesfinalites = response.data;
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createAcquis: function() {
            var zis = this;
            if (zis.newAcquis.length < 10 || zis.newAcquis.length > 100) {
              zis.errorAcquis = true;
              setTimeout(function() {
                zis.errorAcquis = false;
              }, 3000);
            } else {
              axios
                .post("/acquis/create", {
                  name: this.newAcquis
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newAcquis = "";
                  axios
                    .get("/acquis/")
                    .then(function(response) {
                      zis.lesacquis = response.data;
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createRevendication: function() {
            var zis = this;
            if (
              zis.newRevendication.length < 10 ||
              zis.newRevendication.length > 100
            ) {
              zis.errorRevendication = true;
              setTimeout(function() {
                zis.errorRevendication = false;
              }, 3000);
            } else {
              axios
                .post("/revendication/create", {
                  name: this.newRevendication
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newRevendication = "";
                  axios
                    .get("/revendication/")
                    .then(function(response) {
                      zis.lesrevendications = response.data;
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createDenouement: function() {
            var zis = this;
            if (
              zis.newDenouement.length < 10 ||
              zis.newDenouement.length > 100
            ) {
              zis.errorDenouement = true;
              setTimeout(function() {
                zis.errorDenouement = false;
              }, 3000);
            } else {
              axios
                .post("/denouement/create", {
                  name: this.newDenouement
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newDenouement = "";
                  axios
                    .get("/denouement/")
                    .then(function(response) {
                      zis.lesdenouements = response.data;
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createStrategie: function() {
            var zis = this;
            if (zis.newStrategie.length < 10 || zis.newStrategie.length > 100) {
              zis.errorStrategie = true;
              setTimeout(function() {
                zis.errorStrategie = false;
              }, 3000);
            } else {
              axios
                .post("/strategie/create", {
                  name: this.newStrategie
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newStrategie = "";
                  axios
                    .get("/strategie/")
                    .then(function(response) {
                      zis.lesstrategies = response.data;
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createJour: function() {
            var zis = this;
            if (zis.newJour.length < 10 || zis.newJour.length > 100) {
              zis.errorJour = true;
              setTimeout(function() {
                zis.errorJour = false;
              }, 3000);
            } else {
              axios
                .post("/jour/create", {
                  name: this.newJour
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newJour = "";
                  axios
                    .get("/jour/")
                    .then(function(response) {
                      zis.lesjours = response.data;
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createActionsouhaitee: function() {
            var zis = this;
            if (
              zis.newActionsouhaitee.length < 10 ||
              zis.newActionsouhaitee.length > 100
            ) {
              zis.errorActionsouhaitee = true;
              setTimeout(function() {
                zis.errorActionsouhaitee = false;
              }, 3000);
            } else if (
              zis.selectedEffort == "choix-effort" ||
              zis.selectedImpact == "choix-impact"
            ) {
              zis.errorActionsouhaiteeChoix = true;
              setTimeout(function() {
                zis.errorActionsouhaiteeChoix = false;
              }, 3000);
            } else {
              let effortToSend = 0;
              let impactToSend = 0;
              zis.selectedEffort == "Modéré"
                ? (effortToSend = 2)
                : (effortToSend = 8);
              zis.selectedImpact == "Modéré"
                ? (impactToSend = 2)
                : (impactToSend = 8);

              axios
                .post("/actionsouhaitee/create", {
                  name: this.newActionsouhaitee,
                  effort: effortToSend,
                  impact: impactToSend
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newActionsouhaitee = "";
                  zis.selectedEffort = "choix-effort";
                  zis.selectedImpact = "choix-impact";
                  axios
                    .get("/actionsouhaitee/")
                    .then(function(response) {
                      zis.lesactionssouhaitees = response.data;
                      zis.lesactionssouhaitees.map(
                        o => (o.selectedEffortUpvote = "choix-effort")
                      );
                      zis.lesactionssouhaitees.map(
                        o => (o.selectedImpactUpvote = "choix-impact")
                      );
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          },
          createActionpeusouhaitee: function() {
            var zis = this;
            if (
              zis.newActionpeusouhaitee.length < 10 ||
              zis.newActionpeusouhaitee.length > 100
            ) {
              zis.errorActionpeusouhaitee = true;
              setTimeout(function() {
                zis.errorActionpeusouhaitee = false;
              }, 3000);
            } else if (
              zis.selectedEffortPeu == "choix-effort" ||
              zis.selectedImpactPeu == "choix-impact"
            ) {
              zis.errorActionpeusouhaiteeChoix = true;
              setTimeout(function() {
                zis.errorActionpeusouhaiteeChoix = false;
              }, 3000);
            } else {
              let effortToSend = 0;
              let impactToSend = 0;
              zis.selectedEffort == "Modéré"
                ? (effortToSend = 2)
                : (effortToSend = 8);
              zis.selectedImpact == "Modéré"
                ? (impactToSend = 2)
                : (impactToSend = 8);

              axios
                .post("/actionpeusouhaitee/create", {
                  name: this.newActionpeusouhaitee,
                  effort: effortToSend,
                  impact: impactToSend
                })
                .then(function(response) {
                  zis.selected.push(response.data);
                  zis.newActionpeusouhaitee = "";
                  zis.selectedEffortPeu = "choix-effort";
                  zis.selectedImpactPeu = "choix-impact";
                  axios
                    .get("/actionpeusouhaitee/")
                    .then(function(response) {
                      zis.lesactionspeusouhaitees = response.data;
                      zis.lesactionspeusouhaitees.map(
                        o => (o.selectedEffortUpvote = "choix-effort")
                      );
                      zis.lesactionspeusouhaitees.map(
                        o => (o.selectedImpactUpvote = "choix-impact")
                      );
                    })
                    .catch(error => console.log(error));
                })
                .catch(function(error) {
                  console.log(error);
                });
            }
          }
        },
        mounted() {
          var zis = this;

          axios
            .get("/finalite/")
            .then(response => {
              this.lesfinalites = response.data;
              this.finaliteCont = this.sumVotesOnQuestion(
                this.lesfinalites,
                "votes"
              );
            })
            .catch(error => console.log(error));
          axios
            .get("/acquis/")
            .then(response => {
              this.lesacquis = response.data;
              this.acquisCont = this.sumVotesOnQuestion(
                this.lesacquis,
                "votes"
              );
            })
            .catch(error => console.log(error));
          axios
            .get("/revendication/")
            .then(response => {
              this.lesrevendications = response.data;
              this.revendicationCont = this.sumVotesOnQuestion(
                this.lesrevendications,
                "votes"
              );
            })
            .catch(error => console.log(error));
          axios
            .get("/denouement/")
            .then(response => {
              this.lesdenouements = response.data;
              this.denouementCont = this.sumVotesOnQuestion(
                this.lesdenouements,
                "votes"
              );
            })
            .catch(error => console.log(error));
          axios
            .get("/strategie/")
            .then(response => {
              this.lesstrategies = response.data;
              this.strategieCont = this.sumVotesOnQuestion(
                this.lesstrategies,
                "votes"
              );
            })
            .catch(error => console.log(error));
          axios
            .get("/jour/")
            .then(response => {
              this.lesjours = response.data;
              this.jourCont = this.sumVotesOnQuestion(this.lesjours, "votes");
            })
            .catch(error => console.log(error));
          axios
            .get("/actionsouhaitee/")
            .then(function(response) {
              zis.lesactionssouhaitees = response.data;
              zis.actionsouhaiteeCont = zis.sumVotesOnQuestion(
                zis.lesactionssouhaitees,
                "votes"
              );
              zis.lesactionssouhaitees.map(
                o => (o.selectedEffortUpvote = "choix-effort")
              );
              zis.lesactionssouhaitees.map(
                o => (o.selectedImpactUpvote = "choix-impact")
              );
            })
            .catch(error => console.log(error));
          axios
            .get("/actionpeusouhaitee/")
            .then(function(response) {
              zis.lesactionspeusouhaitees = response.data;
              zis.actionpeusouhaiteeCont = zis.sumVotesOnQuestion(
                zis.lesactionspeusouhaitees,
                "votes"
              );
              zis.lesactionspeusouhaitees.map(
                o => (o.selectedEffortUpvote = "choix-effort")
              );
              zis.lesactionspeusouhaitees.map(
                o => (o.selectedImpactUpvote = "choix-impact")
              );
            })
            .catch(error => console.log(error));

          document.body.addEventListener("keyup", e => {
            if (e.keyCode === 27) {
              zis.menuBool = false;
            }
          });
        },
        watch: {
          lesfinalites: function(jsondata) {
            this.removeElement("chartContainerFinalite");
            this.addElement(
              "chart-finalite",
              "div",
              "chartContainerFinalite",
              ""
            );

            var elementToAnimate = document.getElementById("chart-finalite");
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-finalite")
              .offsetWidth;
            var svg = dimple.newSvg(
              "#chartContainerFinalite",
              widthOfChart,
              400
            );
            d3.json(hostname + "/finalite/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(0, 0, widthOfChart, 360);
              var p = myChart.addMeasureAxis("p", "votes");
              p.showPercent = true;
              var ring = myChart.addSeries("name", dimple.plot.pie);
              ring.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Soutien " + Math.round(e.p * 100) + "%"
                ];
              };
              ring.innerRadius = "50%";
              myChart.addLegend(widthOfChart - 80, 20, 90, 300, "left");
              myChart.draw();
            });
          },
          lesacquis: function(jsondata) {
            this.removeElement("chartContainerAcquis");
            this.addElement("chart-acquis", "div", "chartContainerAcquis", "");

            var elementToAnimate = document.getElementById("chart-acquis");
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-acquis")
              .offsetWidth;
            var svg = dimple.newSvg("#chartContainerAcquis", widthOfChart, 400);
            d3.json(hostname + "/acquis/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(0, 0, widthOfChart, 360);
              var p = myChart.addMeasureAxis("p", "votes");
              p.showPercent = true;
              var ring = myChart.addSeries("name", dimple.plot.pie);
              ring.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Soutien " + Math.round(e.p * 100) + "%"
                ];
              };
              ring.innerRadius = "50%";
              myChart.addLegend(widthOfChart - 80, 20, 90, 300, "left");
              myChart.draw();
            });
          },
          lesrevendications: function(jsondata) {
            var totalVotes = this.sumVotesOnQuestion(
              this.lesrevendications,
              "votes"
            );
            this.removeElement("chartContainerRevendication");
            this.addElement(
              "chart-revendication",
              "div",
              "chartContainerRevendication",
              ""
            );

            var elementToAnimate = document.getElementById(
              "chart-revendication"
            );
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-revendication")
              .offsetWidth;
            var svg = dimple.newSvg(
              "#chartContainerRevendication",
              widthOfChart,
              400
            );
            d3.json(hostname + "/revendication/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(0, 0, widthOfChart, 360);
              var xAxis = myChart.addMeasureAxis("x", "votes");
              xAxis.hidden = true;
              var y = myChart.addCategoryAxis("y", "votes");
              var bars = myChart.addSeries("name", dimple.plot.bar);
              bars.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Soutien " + Math.round((e.cy / totalVotes) * 100) + "%"
                ];
              };
              myChart.addLegend(widthOfChart - 100, 60, 100, 300, "left");
              myChart.draw();
            });
          },
          lesdenouements: function(jsondata) {
            var totalVotes = this.sumVotesOnQuestion(
              this.lesdenouements,
              "votes"
            );
            this.removeElement("chartContainerDenouement");
            this.addElement(
              "chart-denouement",
              "div",
              "chartContainerDenouement",
              ""
            );

            var elementToAnimate = document.getElementById("chart-denouement");
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-denouement")
              .offsetWidth;
            var svg = dimple.newSvg(
              "#chartContainerDenouement",
              widthOfChart,
              400
            );
            d3.json(hostname + "/denouement/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(0, 0, widthOfChart, 360);
              var xAxis = myChart.addMeasureAxis("x", "votes");
              xAxis.hidden = true;
              var y = myChart.addCategoryAxis("y", "votes");
              var bars = myChart.addSeries("name", dimple.plot.bar);
              bars.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Soutien " + Math.round((e.cy / totalVotes) * 100) + "%"
                ];
              };
              myChart.addLegend(widthOfChart - 100, 60, 100, 300, "left");
              myChart.draw();
            });
          },
          lesstrategies: function(jsondata) {
            this.removeElement("chartContainerStrategie");
            this.addElement(
              "chart-strategie",
              "div",
              "chartContainerStrategie",
              ""
            );

            var elementToAnimate = document.getElementById("chart-strategie");
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-strategie")
              .offsetWidth;
            var svg = dimple.newSvg(
              "#chartContainerStrategie",
              widthOfChart,
              400
            );
            d3.json(hostname + "/strategie/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(0, 0, widthOfChart, 360);
              var p = myChart.addMeasureAxis("p", "votes");
              p.showPercent = true;
              var ring = myChart.addSeries("name", dimple.plot.pie);
              ring.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Soutien " + Math.round(e.p * 100) + "%"
                ];
              };
              ring.innerRadius = "0";
              myChart.addLegend(widthOfChart - 80, 20, 90, 300, "left");

              myChart.draw();
            });
          },
          lesjours: function(jsondata) {
            this.removeElement("chartContainerJour");
            this.addElement("chart-jour", "div", "chartContainerJour", "");

            var elementToAnimate = document.getElementById("chart-jour");
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-jour")
              .offsetWidth;
            var svg = dimple.newSvg("#chartContainerJour", widthOfChart, 400);
            d3.json(hostname + "/jour/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(0, 0, widthOfChart, 360);
              var p = myChart.addMeasureAxis("p", "votes");
              p.showPercent = true;
              var ring = myChart.addSeries("name", dimple.plot.pie);
              ring.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Soutien " + Math.round(e.p * 100) + "%"
                ];
              };
              ring.innerRadius = "0";
              myChart.addLegend(widthOfChart - 80, 20, 90, 300, "left");

              myChart.draw();
            });
          },
          lesactionssouhaitees: function(jsondata) {
            this.removeElement("chartContainerActionsouhaitee");
            this.addElement(
              "chart-actionsouhaitee",
              "div",
              "chartContainerActionsouhaitee",
              ""
            );

            var totalVotes = this.sumVotesOnQuestion(
              this.lesactionssouhaitees,
              "votes"
            );

            var elementToAnimate = document.getElementById(
              "chart-actionsouhaitee"
            );
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById("chart-actionsouhaitee")
              .offsetWidth;
            var svg = dimple.newSvg(
              "#chartContainerActionsouhaitee",
              widthOfChart,
              400
            );
            d3.json(hostname + "/actionsouhaitee/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(40, 30, widthOfChart - 60, 330);
              x = myChart.addMeasureAxis("x", "effort");
              y = myChart.addMeasureAxis("y", "impact");
              var lowestX = Number.POSITIVE_INFINITY;
              var highestX = Number.NEGATIVE_INFINITY;
              var tmp;
              for (var i = data.length - 1; i >= 0; i--) {
                tmp = data[i].effort;
                if (tmp < lowestX) lowestX = tmp;
                if (tmp > highestX) highestX = tmp;
              }
              x.overrideMin = lowestX;
              var lowestY = Number.POSITIVE_INFINITY;
              var highestY = Number.NEGATIVE_INFINITY;

              var tmp;
              for (var i = data.length - 1; i >= 0; i--) {
                tmp = data[i].impact;
                if (tmp < lowestY) lowestY = tmp;
                if (tmp > highestY) highestY = tmp;
              }
              y.overrideMin = lowestY;
              myChart.addMeasureAxis("z", "votes");
              var serie = myChart.addSeries(["name"], dimple.plot.bubble);
              serie.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Impact " +
                    (e.cy > lowestY + (highestY - lowestY) / 2
                      ? "plutôt favorable"
                      : "moins favorable") +
                    " , effort " +
                    (e.cx > lowestX + (highestX - lowestX) / 2
                      ? "plutôt important"
                      : "moins important"),
                  "Soutien " + Math.round((e.cz / totalVotes) * 100) + "%"
                ];
              };

              myChart.draw();

              if (x.overrideMin > 0) {
                x._origin = myChart._xPixels();
              }
              if (y.overrideMin > 0) {
                y._origin = myChart._yPixels() + myChart._heightPixels();
              }

              d3.selection.prototype.moveToBack = function() {
                return this.each(function() {
                  var firstChild = this.parentNode.firstChild;
                  if (firstChild) {
                    this.parentNode.insertBefore(this, firstChild);
                  }
                });
              };

              svg
                .append("line")
                .attr("x1", myChart._xPixels())
                .attr("x2", myChart._xPixels() + myChart._widthPixels())
                .attr("y1", myChart._yPixels() + myChart._heightPixels() / 2)
                .attr("y2", myChart._yPixels() + myChart._heightPixels() / 2)
                .style("stroke", "red")
                .moveToBack();

              svg
                .append("line")
                .attr("y1", myChart._yPixels())
                .attr("y2", myChart._yPixels() + myChart._heightPixels())
                .attr("x1", myChart._widthPixels() / 2 + myChart._xPixels())
                .attr("x2", myChart._xPixels() + myChart._widthPixels() / 2)
                .style("stroke", "yellow")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels())
                .attr("y", myChart._yPixels())
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "green")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels() + myChart._widthPixels() / 2)
                .attr("y", myChart._yPixels() + myChart._heightPixels() / 2)
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "red")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels())
                .attr("y", myChart._yPixels() + myChart._heightPixels() / 2)
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "grey")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels() + myChart._widthPixels() / 2)
                .attr("y", myChart._yPixels())
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "grey")
                .moveToBack();
            });
          },
          lesactionspeusouhaitees: function(jsondata) {
            this.removeElement("chartContainerActionpeusouhaitee");
            this.addElement(
              "chart-actionpeusouhaitee",
              "div",
              "chartContainerActionpeusouhaitee",
              ""
            );

            var totalVotes = this.sumVotesOnQuestion(
              this.lesactionspeusouhaitees,
              "votes"
            );

            var elementToAnimate = document.getElementById(
              "chart-actionpeusouhaitee"
            );
            elementToAnimate.classList.remove("animated", "pulse");
            elementToAnimate.className += " animated pulse";

            var widthOfChart = document.getElementById(
              "chart-actionpeusouhaitee"
            ).offsetWidth;
            var svg = dimple.newSvg(
              "#chartContainerActionpeusouhaitee",
              widthOfChart,
              400
            );
            d3.json(hostname + "/actionpeusouhaitee/", function(data) {
              var myChart = new dimple.chart(svg, data);
              myChart.setBounds(40, 30, widthOfChart - 60, 330);
              x = myChart.addMeasureAxis("x", "effort");
              y = myChart.addMeasureAxis("y", "impact");
              var lowestX = Number.POSITIVE_INFINITY;
              var highestX = Number.NEGATIVE_INFINITY;
              var tmp;
              for (var i = data.length - 1; i >= 0; i--) {
                tmp = data[i].effort;
                if (tmp < lowestX) lowestX = tmp;
                if (tmp > highestX) highestX = tmp;
              }
              x.overrideMin = lowestX;
              var lowestY = Number.POSITIVE_INFINITY;
              var highestY = Number.NEGATIVE_INFINITY;

              var tmp;
              for (var i = data.length - 1; i >= 0; i--) {
                tmp = data[i].impact;
                if (tmp < lowestY) lowestY = tmp;
                if (tmp > highestY) highestY = tmp;
              }
              y.overrideMin = lowestY;
              myChart.addMeasureAxis("z", "votes");
              var serie = myChart.addSeries(["name"], dimple.plot.bubble);
              serie.getTooltipText = function(e) {
                return [
                  e.aggField[0],
                  "Impact " +
                    (e.cy > lowestY + (highestY - lowestY) / 2
                      ? "plutôt défavorable"
                      : "moins défavorbale") +
                    " , effort " +
                    (e.cx > lowestX + (highestX - lowestX) / 2
                      ? "plutôt important"
                      : "moins important"),
                  "Opposition " + Math.round((e.cz / totalVotes) * 100) + "%"
                ];
              };

              myChart.draw();

              if (x.overrideMin > 0) {
                x._origin = myChart._xPixels();
              }
              if (y.overrideMin > 0) {
                y._origin = myChart._yPixels() + myChart._heightPixels();
              }

              d3.selection.prototype.moveToBack = function() {
                return this.each(function() {
                  var firstChild = this.parentNode.firstChild;
                  if (firstChild) {
                    this.parentNode.insertBefore(this, firstChild);
                  }
                });
              };

              svg
                .append("line")
                .attr("x1", myChart._xPixels())
                .attr("x2", myChart._xPixels() + myChart._widthPixels())
                .attr("y1", myChart._yPixels() + myChart._heightPixels() / 2)
                .attr("y2", myChart._yPixels() + myChart._heightPixels() / 2)
                .style("stroke", "yellow")
                .moveToBack();

              svg
                .append("line")
                .attr("y1", myChart._yPixels())
                .attr("y2", myChart._yPixels() + myChart._heightPixels())
                .attr("x1", myChart._widthPixels() / 2 + myChart._xPixels())
                .attr("x2", myChart._xPixels() + myChart._widthPixels() / 2)
                .style("stroke", "red")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels())
                .attr("y", myChart._yPixels())
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "red")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels() + myChart._widthPixels() / 2)
                .attr("y", myChart._yPixels() + myChart._heightPixels() / 2)
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "green")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels())
                .attr("y", myChart._yPixels() + myChart._heightPixels() / 2)
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "grey")
                .moveToBack();

              svg
                .append("rect")
                .attr("class", "background-rect")
                .attr("x", myChart._xPixels() + myChart._widthPixels() / 2)
                .attr("y", myChart._yPixels())
                .attr("width", myChart._widthPixels() / 2)
                .attr("height", myChart._heightPixels() / 2)
                .style("fill", "grey")
                .moveToBack();
            });
          }
        }
      });
    </script>

    <script type="text/javascript"></script>
  </body>
</html>
